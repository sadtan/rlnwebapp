<%- include('../partials/header') -%> 

<main>
    
    <section class="home-section container top btm home-intro">
        <div class="row align-items-center">
            <div class="text col col-12 col-lg-6  order-2-lg">
                <h2 class="about-text">
                    Un espacio digital abierto para la documentación, conservación y consulta de textiles que narran la vida en medio del conflicto armado en Colombia.
                </h2>
                <button type="button" class="btn white" onclick="location.href='/acerca-de';">
                    Saber más 

                    <img class="arrow-btn" src="/img/icons/arrow-btn.svg">

                </button>
            </div>

            <div class="img first-on-large col col-12 col-lg-6  order-1-lg">
                <img src="/img/home.png" alt="">
            </div>
        </div>

        <div class="row align-items-center">
            <img class="chevron" src="/img/icons/chevron_down.svg" alt="">
        </div>

    </section>

    <section class="home-section preview-fondos container top ">
        <% 
        

        var creadores = data.data[data.data['main']];
        var ids = [];
        for (var i = 0; i < creadores.length; ++i) {
            ids.push(creadores[i]['id']);
        }
        //var order = [3, 2, 4, 1];
        var order = [];
        var h = [];
        for ( let i = 0; i < 4; ++i ) {
            var newO = Math.floor(Math.random() * ids.length)
            
            while( h.indexOf(newO) != -1 ) {
                newO = Math.floor(Math.random() * ids.length)
            }
            h.push(newO);
            order.push(ids[newO]);
        }

        for (o in order)
        {
            for (var i = 0; i < creadores.length; ++i) {
                if (creadores[i]['id'] == order[o])
                {
        if (creadores[i]['dep'] != undefined)
            dep = creadores[i]['dep']
        lugar = dep['lugar'][0]
        
        
        %>

        <div class="fondo row align-items-center btm">
            <div class="img col col-12 col-lg-6">
            <% 
            //if (creadores[i]['img_linea_path'] != "" || creadores[i]['img_linea_path'] != "-")
            if (creadores[i]['img_linea_path'].toString().indexOf("/") != -1)
            {
            %>
                <img class="linea s3_img" src="<%=creadores[i]['img_linea_path']%>" alt="" class=""> 
                <img class="azul s3_img" src="<%=creadores[i]['img_azul_path']%>" alt="" class="s3_img">
            <%
            } else {
            %>
                <img class="azul s3_img" src="<%=creadores[i]['img_azul_path']%>" alt="" class="s3_img">
            <%
                }
            %>
            </div>

            <%  if (creadores[i]['dep'] != undefined) { %>
            <div class="text col col-12 col-lg-5 btm">
                <h3 class="lugar">
                        <%=lugar['localidad']%>,
                        <%=lugar['departamento']%>
                </h3> 
            <%
                }
            %>
                <h2><%=creadores[i]['nombre']%></h2>
                <p>
                    <%
                    var txt = creadores[i]['caracterizacion'].substring(0, 230) + "L";
                    txt = txt.substr(0, Math.min(txt.length, txt.lastIndexOf(" "))) + "...";
                    %>
                    <%=txt%>
                </p>
                <a href="/creadores/<%=creadores[i]['id']%>">
                    <button class ="btn blue">Conocer más</button>
                </a>
            </div>
        </div>
        <%
        break;
                }
            }
        }
        %>
    </section>

    <section class="home-section preview-fondos container top" id="ccc">
        <%
        for (var i = 0; i < creadores.length; ++i) {
            if (order.indexOf(creadores[i]['id']) == -1)
            {
                if (creadores[i]['dep'] != undefined)
                    dep = creadores[i]['dep']
                lugar = dep['lugar'][0]
        %>
        <div class="fondo row align-items-center btm show-more-card">
            <div class="img col col-12 col-lg-6">
            <% 
            //if (creadores[i]['img_linea_path'] != "" || creadores[i]['img_linea_path'] != "_")
            if (creadores[i]['img_linea_path'].toString().indexOf("/") != -1)
            {
            %>
                <img class="linea s3_img" src="<%=creadores[i]['img_linea_path']%>" alt="" class=""> 
                <img class="azul s3_img" src="<%=creadores[i]['img_azul_path']%>" alt="" class="s3_img">
            <%
            } 
            else 
            {
            %>
                <img class="linea" src="/img/linea_mampujan.jpg" alt=""> 
                <img class="azul" src="/img/azul_mampujan.jpg" alt="">
            <%
            }
            %>
            </div>
            <%  
            if (creadores[i]['dep'] != undefined) 
            { 
            %>
            <div class="text col col-12 col-lg-5 btm">
                <h3 class="lugar">
                        <%=lugar['localidad']%>,
                        <%=lugar['departamento']%>
                </h3> 
            <%
            }
            %>
            <h2><%=creadores[i]['nombre']%></h2>
            <p>
                <%
                var txt = creadores[i]['caracterizacion'].substring(0, 230) + "L";
                txt = txt.substr(0, Math.min(txt.length, txt.lastIndexOf(" "))) + "...";
                %>
                <%=txt%>
            </p>
            <a href="/creadores/<%=creadores[i]['id']%>">
                <button class ="btn blue">Conocer más</button>
            </a>
            </div>
        </div>
        <%
            }
        }
        %>

        
    </section>
    <div class="container ver-mas btm d-flex justify-content-center">
        <button class ="col-auto btn blue center " id="show-more-btn">Ver más</button>
    </div>

</main>

<script>
    var showMoreCards = document.getElementsByClassName("show-more-card");
    document.getElementById("ccc").classList.add("d-none");


    document.getElementById("show-more-btn").addEventListener("click", function()
    {
        console.log("JS")
        document.getElementById("ccc").classList.remove("d-none");
        document.getElementById("show-more-btn").classList.add("d-none");
    })
</script>

<section class="hero hands btm">
    <div class="container">
        <%
            var frases = [
                '“El tejido nos permite calentar la memoria, lo hace recorrer a uno toda esa radiografía de su vida” <br>Grupo Artesanías Guayacán de Bojayá, Chocó.',
                '“¿Por qué hace uno la colcha? Porque de muchos pedacitos se hace algo grande” <br>Grupo Artesanías Guayacán de Bojayá, Chocó.',
                '“Remendar es demostrar amor, amor a lo que se rompió. Remendar es como darle vida a lo que no tiene vida” <br>Grupo Artesanías Guayacán de Bojayá, Chocó.',
                '“En lo textil, en el bordado, en lo que se cose, logramos olvidar lo que nos pasó” <br>Grupo Artesanías Choibá de Quibdó, Chocó.',
                '“En el tejido y en el bordado encontré mucha tranquilidad, paz, porque no solo me enfocaba en pensar en lo que pasó, sino en crear para ir saliendo adelante” <br>Grupo Artesanías Choibá de Quibdó, Chocó.',
                '“De día a día que iban pasando las cosas, yo me apegué a esa puntada, me iba apegando a esa puntada, hasta que hoy ya no siento el tiempo” <br>Costurero Tejedoras por la Memoria de Sonsón, Antioquia.',
                '“Pa’ mí la aguja es como el médico, por eso a mí no me gustan los psicólogos, porque yo estoy triste y cojo la aguja y el hilo, y eso automáticamente la tristeza no se va, pero en el momento ya se me pierde” <br>Costurero Tejedoras por la Memoria de Sonsón, Antioquia.',
                '“Lo que es la aguja, la hebrita de hilo, eso disipa muchas penas a uno” <br>Costurero Tejedoras por la Memoria de Sonsón, Antioquia.',
                '“Para mí el tejer también significa terapia, una terapia que se hace con las manos” <br>Costurero Tejedoras por la Memoria de Sonsón, Antioquia.',
                '“Remendar es volver a la vida algo que parece perdido, es recuperar, pero recuperarlo para hacerlo útil. Muchas veces se remienda para preservar, pero para mí es darle vida a lo que parece perdido” <br>Costurero Tejedoras por la Memoria de Sonsón, Antioquia'
            ];
            var iFrase = Math.floor(Math.random() * frases.length)
        %>
        <p class="text">
            <i><%- frases[iFrase] %> </i>
        </p>
    </div>
</section>

<section class="universidades">
    <div class="container">
        <div class="row desarrollo align-items-center justify-content-center btm">
            <h2 class="col col-12 col-lg-auto"> Desarrollado por </h2>
            <img class="col col-auto col-lg-auto" src="/img/logos/udea.svg">
            <img  class="col col-auto col-lg-auto" src="/img/logos/unal.svg">
            <h2 class="col col-12 col-lg-auto apoyo"> Con apoyo de </h2>
            <img  class="col col-auto col-lg-auto" src="/img/logos/andes.svg">
            <img  class="col col-auto col-lg-auto apoyo" src="/img/logos/minciencias.png">
        </div>
    </div>
</section>

<script src="/scripts/s3ImageUrl.js"></script>
<%- include('../partials/footer') -%>